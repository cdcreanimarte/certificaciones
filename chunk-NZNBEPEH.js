import{l as Pt}from"./chunk-YIEEJNGK.js";import{a as $}from"./chunk-N3O4T7XD.js";import"./chunk-FK6H3RFT.js";import{C as D,J as R,K as st,L as pt,M as ft,N as ut,O as gt,P as Ct,Q as _t,R as xt,S as ht,T as bt,U as Mt,V as I,X as wt,Y as k,Z as O,b as X,c as Z,d as tt,e as et,f as nt,g as it,h as ot,k as at,l as rt,m as lt,p as E,q as ct,s as mt,y as dt}from"./chunk-BVMUH6OA.js";import"./chunk-2PPFUFFT.js";import{b as K,c as W}from"./chunk-6NENORIV.js";import"./chunk-UH6WQSDH.js";import"./chunk-42NVM6MY.js";import{Db as x,Ib as o,Jb as i,Kb as h,Lb as g,Mb as C,Ob as b,Rb as M,Tb as s,Ua as Q,Wb as G,Xa as l,Ya as S,Yb as F,Zb as z,Zc as J,_b as A,_c as y,ba as N,cc as T,dc as a,eb as P,ec as _,fc as w,ja as f,ka as u,mc as U,pc as H,rc as B,ta as v,vb as m,wb as Y,xb as p}from"./chunk-INQ7ZXWM.js";import"./chunk-X5YLR3NI.js";import{i as L}from"./chunk-ODN5LVDJ.js";var V=class t{constructor(e){this.data=e}static \u0275fac=function(n){return new(n||t)(S(X))};static \u0275cmp=P({type:t,selectors:[["app-modal-confirmation"]],decls:9,vars:2,consts:[["mat-dialog-title",""],["align","end"],["mat-button","","mat-dialog-close",""],["mat-button","","color","warn",3,"mat-dialog-close"]],template:function(n,r){n&1&&(o(0,"h2",0),a(1,"Confirmar eliminaci\xF3n"),i(),o(2,"mat-dialog-content"),a(3),i(),o(4,"mat-dialog-actions",1)(5,"button",2),a(6,"Cancelar"),i(),o(7,"button",3),a(8,"Eliminar"),i()()),n&2&&(l(3),w(" \xBFEst\xE1s seguro de que deseas eliminar el certificado de ",r.data,"? "),l(4),p("mat-dialog-close",!0))},dependencies:[O,E,tt,et,it,nt],encapsulation:2})};var Dt=()=>[5,10,25,100];function Rt(t,e){if(t&1){let n=b();o(0,"button",22),M("click",function(){f(n);let c=s(),d=T(4);return u(c.clearFilter(d))}),o(1,"mat-icon"),a(2,"close"),i()()}}function It(t,e){t&1&&(o(0,"th",23),a(1,"C\xF3digo"),i())}function kt(t,e){if(t&1&&(o(0,"td",24)(1,"span",25),a(2),i()()),t&2){let n=e.$implicit;l(2),_(n.code)}}function Vt(t,e){t&1&&(o(0,"th",23),a(1,"Estudiante"),i())}function qt(t,e){if(t&1&&(o(0,"td",24),a(1),i()),t&2){let n=e.$implicit;l(),_(n.studentName)}}function Lt(t,e){t&1&&(o(0,"th",23),a(1,"N\xFAmero Doc."),i())}function Nt(t,e){if(t&1&&(o(0,"td",24)(1,"span",26),a(2),i(),a(3),i()),t&2){let n=e.$implicit;l(2),_(n.documentType),l(),w(" ",n.documentNumber," ")}}function Ft(t,e){t&1&&(o(0,"th",23),a(1,"Curso"),i())}function zt(t,e){if(t&1&&(o(0,"td",24),a(1),i()),t&2){let n=e.$implicit;l(),_(n.courseName)}}function At(t,e){t&1&&(o(0,"th",23),a(1,"Horas"),i())}function Ht(t,e){if(t&1&&(o(0,"td",24)(1,"span",27),a(2),i()()),t&2){let n=e.$implicit;l(2),w("",n.hours," hrs")}}function Bt(t,e){t&1&&(o(0,"th",23),a(1,"Email"),i())}function $t(t,e){if(t&1&&(o(0,"td",24)(1,"a",28),a(2),i()()),t&2){let n=e.$implicit;l(),G("href","mailto:",n.email,"",Q),l(),_(n.email)}}function jt(t,e){t&1&&(o(0,"th",23),a(1,"Fecha de Emisi\xF3n"),i())}function Qt(t,e){if(t&1&&(o(0,"td",24),a(1),H(2,"date"),H(3,"date"),i()),t&2){let n=e.$implicit;l(),w(" ",n.issueDate?B(2,1,n.issueDate,"dd/MM/yyyy"):B(3,4,n.created_at,"dd/MM/yyyy")," ")}}function Yt(t,e){t&1&&h(0,"th",29)}function Gt(t,e){if(t&1){let n=b();o(0,"td",24)(1,"div",30)(2,"button",31),M("click",function(){let c=f(n).$implicit,d=s();return u(d.onDelete(c))}),o(3,"mat-icon"),a(4,"delete"),i()()()()}t&2&&(l(2),p("matTooltip","Eliminar certificado"))}function Ut(t,e){t&1&&h(0,"tr",32)}function Jt(t,e){t&1&&h(0,"tr",33)}function Kt(t,e){if(t&1&&(o(0,"tr",20)(1,"td",34)(2,"div",35)(3,"mat-icon"),a(4,"search_off"),i(),o(5,"span"),a(6),i()()()()),t&2){let n=s(),r=T(4);l(),Y("colspan",n.displayedColumns.length),l(5),w('No hay datos que coincidan con el filtro "',r.value,'"')}}var q=class t{constructor(e){this.dialog=e;this.dataSource=new I([])}sort;paginator;deleteRequest=new v;editRequest=new v;viewRequest=new v;displayedColumns=["code","studentName","documentNumber","courseName","hours","email","issueDate","actions"];dataSource;set data(e){if(!e||e.length===0){this.dataSource=new I([]);return}let n=e.sort((r,c)=>{let d=r.issueDate?new Date(r.issueDate):r.created_at?new Date(r.created_at):new Date(0);return(c.issueDate?new Date(c.issueDate):c.created_at?new Date(c.created_at):new Date(0)).getTime()-d.getTime()});this.dataSource=new I(n),this.paginator&&(this.dataSource.paginator=this.paginator),this.sort&&(this.dataSource.sort=this.sort),this.setupFilterPredicate()}ngOnInit(){}ngAfterViewInit(){setTimeout(()=>{this.dataSource&&(this.paginator&&(this.dataSource.paginator=this.paginator),this.sort&&(this.dataSource.sort=this.sort))})}setupFilterPredicate(){this.dataSource.filterPredicate=(e,n)=>((e.code||"")+(e.studentName||"")+(e.documentNumber||"")+(e.courseName||"")+(e.email||"")).toLowerCase().includes(n.toLowerCase())}applyFilter(e){let n=e.target.value;this.dataSource.filter=n.trim().toLowerCase(),this.dataSource.paginator&&this.dataSource.paginator.firstPage()}clearFilter(e){e.value="",this.dataSource.filter="",this.dataSource.paginator&&this.dataSource.paginator.firstPage()}onDelete(e){this.dialog.open(V,{width:"350px",data:e.studentName}).afterClosed().subscribe(r=>{r&&this.deleteRequest.emit(e)})}onEdit(e){this.editRequest.emit(e)}onView(e){this.viewRequest.emit(e)}static \u0275fac=function(n){return new(n||t)(S(Z))};static \u0275cmp=P({type:t,selectors:[["app-table"]],viewQuery:function(n,r){if(n&1&&(F(R,5),F(k,5)),n&2){let c;z(c=A())&&(r.sort=c.first),z(c=A())&&(r.paginator=c.first)}},inputs:{data:"data"},outputs:{deleteRequest:"deleteRequest",editRequest:"editRequest",viewRequest:"viewRequest"},decls:38,vars:8,consts:[["input",""],["appearance","fill"],["matInput","","placeholder","Buscar por nombre, c\xF3digo, curso...",3,"keyup"],["matPrefix",""],["matSuffix","","mat-icon-button","","aria-label","Limpiar"],[1,"mat-elevation-z8"],["mat-table","","matSort","",3,"dataSource"],["matColumnDef","code"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","studentName"],["matColumnDef","documentNumber"],["matColumnDef","courseName"],["matColumnDef","hours"],["matColumnDef","email"],["matColumnDef","issueDate"],["matColumnDef","actions"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[1,"mat-row","mat-no-data-row"],["showFirstLastButtons","","aria-label","Seleccionar p\xE1gina de certificados",3,"pageSizeOptions","pageSize"],["matSuffix","","mat-icon-button","","aria-label","Limpiar",3,"click"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],[1,"code-badge"],[1,"document-type"],[1,"hours-badge"],[1,"email-link",3,"href"],["mat-header-cell",""],[1,"action-buttons"],["mat-icon-button","",3,"click","matTooltip"],["mat-header-row",""],["mat-row",""],[1,"mat-cell"],[1,"no-data-message"]],template:function(n,r){if(n&1){let c=b();o(0,"mat-form-field",1)(1,"mat-label"),a(2,"Filtrar certificados"),i(),o(3,"input",2,0),M("keyup",function(j){return f(c),u(r.applyFilter(j))}),i(),o(5,"mat-icon",3),a(6,"search"),i(),m(7,Rt,3,0,"button",4),i(),o(8,"div",5)(9,"table",6),g(10,7),m(11,It,2,0,"th",8)(12,kt,3,1,"td",9),C(),g(13,10),m(14,Vt,2,0,"th",8)(15,qt,2,1,"td",9),C(),g(16,11),m(17,Lt,2,0,"th",8)(18,Nt,4,2,"td",9),C(),g(19,12),m(20,Ft,2,0,"th",8)(21,zt,2,1,"td",9),C(),g(22,13),m(23,At,2,0,"th",8)(24,Ht,3,1,"td",9),C(),g(25,14),m(26,Bt,2,0,"th",8)(27,$t,3,3,"td",9),C(),g(28,15),m(29,jt,2,0,"th",8)(30,Qt,4,7,"td",9),C(),g(31,16),m(32,Yt,1,0,"th",17)(33,Gt,5,1,"td",9),C(),m(34,Ut,1,0,"tr",18)(35,Jt,1,0,"tr",19)(36,Kt,7,2,"tr",20),i(),h(37,"mat-paginator",21),i()}if(n&2){let c=T(4);l(7),x(c.value?7:-1),l(2),p("dataSource",r.dataSource),l(25),p("matHeaderRowDef",r.displayedColumns),l(),p("matRowDefColumns",r.displayedColumns),l(),x(r.dataSource.filter&&!r.dataSource.filteredData.length?36:-1),l(),p("pageSizeOptions",U(7,Dt))("pageSize",10)}},dependencies:[O,mt,lt,ot,at,rt,D,dt,k,R,st,pt,ut,xt,gt,ft,ht,Ct,_t,bt,Mt,wt,J,y],styles:[".mat-elevation-z8[_ngcontent-%COMP%]{overflow-x:auto;border-radius:8px;box-shadow:0 2px 10px #0000000d!important;background-color:#fff}mat-form-field[_ngcontent-%COMP%]{width:100%;margin-bottom:16px}mat-form-field[_ngcontent-%COMP%]     .mat-form-field-wrapper{padding-bottom:0}mat-form-field[_ngcontent-%COMP%]     .mat-form-field-flex{padding:0 12px!important;align-items:center}mat-form-field[_ngcontent-%COMP%]     .mat-form-field-infix{padding:12px 0!important;border-top:0}mat-form-field[_ngcontent-%COMP%]     .mat-form-field-label{top:24px!important;transform-origin:left top!important}mat-form-field[_ngcontent-%COMP%]     .mat-form-field-label-wrapper{top:-1em;padding-top:1em}mat-form-field[_ngcontent-%COMP%]     .mat-focused .mat-form-field-label{transform:translateY(-1.5em) scale(.75)!important}mat-form-field[_ngcontent-%COMP%]     .mat-form-field-appearance-fill .mat-form-field-flex{background-color:#fff;border-radius:8px 8px 0 0;padding:12px 12px 0!important;box-shadow:0 2px 6px #0000000a}mat-form-field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{font-size:14px}table[_ngcontent-%COMP%]{width:100%;min-width:900px;border-collapse:separate;border-spacing:0}table[_ngcontent-%COMP%]   tr.mat-row[_ngcontent-%COMP%]{height:52px;transition:background-color .2s ease}table[_ngcontent-%COMP%]   tr.mat-row[_ngcontent-%COMP%]:hover{background-color:#00000005}table[_ngcontent-%COMP%]   tr.mat-row[_ngcontent-%COMP%]:not(:last-child){border-bottom:1px solid rgba(0,0,0,.05)}table[_ngcontent-%COMP%]   th.mat-header-cell[_ngcontent-%COMP%]{font-weight:600;color:#000000b3;font-size:13px;padding:16px 8px;border-bottom:1px solid rgba(0,0,0,.1);white-space:nowrap}table[_ngcontent-%COMP%]   th.mat-header-cell[_ngcontent-%COMP%]:first-child{padding-left:24px}table[_ngcontent-%COMP%]   th.mat-header-cell[_ngcontent-%COMP%]:last-child{padding-right:24px}table[_ngcontent-%COMP%]   td.mat-cell[_ngcontent-%COMP%]{padding:8px;color:#000c;font-size:14px}table[_ngcontent-%COMP%]   td.mat-cell[_ngcontent-%COMP%]:first-child{padding-left:24px}table[_ngcontent-%COMP%]   td.mat-cell[_ngcontent-%COMP%]:last-child{padding-right:24px}.mat-column-actions[_ngcontent-%COMP%]{width:120px;text-align:right}.mat-column-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:36px;height:36px;line-height:36px}.mat-column-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:18px;color:#00000080;transition:color .2s ease}.mat-column-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover   mat-icon[_ngcontent-%COMP%]{color:#f44336}  .mat-paginator{border-top:1px solid rgba(0,0,0,.05)}  .mat-paginator .mat-paginator-container{min-height:56px;padding:0 24px}  .mat-paginator .mat-paginator-range-label{margin:0 24px}tr.mat-row.mat-no-data-row[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:24px;text-align:center;color:#00000080;font-style:italic}.code-badge[_ngcontent-%COMP%]{background-color:#3f51b51a;color:#3f51b5;padding:4px 8px;border-radius:4px;font-size:12px;font-weight:500;letter-spacing:.5px}.document-type[_ngcontent-%COMP%]{color:#0009;font-size:12px;font-weight:500;margin-right:4px}.hours-badge[_ngcontent-%COMP%]{background-color:#4caf501a;color:#4caf50;padding:4px 8px;border-radius:4px;font-size:12px;font-weight:500}.email-link[_ngcontent-%COMP%]{color:#3f51b5;text-decoration:none;transition:color .2s ease}.email-link[_ngcontent-%COMP%]:hover{color:#303f9f;text-decoration:underline}.action-buttons[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:4px}.action-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:nth-child(1)   mat-icon[_ngcontent-%COMP%]{color:#3f51b5}.action-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:nth-child(2)   mat-icon[_ngcontent-%COMP%]{color:#ff9800}.action-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:nth-child(3)   mat-icon[_ngcontent-%COMP%]{color:#f44336}.action-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover   mat-icon[_ngcontent-%COMP%]{transform:scale(1.2)}.no-data-message[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:24px 0}.no-data-message[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:48px;height:48px;width:48px;margin-bottom:16px;color:#0000004d}.no-data-message[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:14px}"]})};function Wt(t,e){t&1&&(o(0,"div",5),h(1,"div",8),o(2,"div",9),a(3,"Cargando certificados..."),i()())}function Xt(t,e){if(t&1){let n=b();o(0,"div",6)(1,"p",10),a(2),i(),o(3,"button",11),M("click",function(){f(n);let c=s();return u(c.reloadCertificates())}),o(4,"mat-icon"),a(5,"refresh"),i(),a(6," Reintentar "),i()()}if(t&2){let n=s();l(2),_(n.error())}}function Zt(t,e){if(t&1){let n=b();o(0,"div",7)(1,"app-table",12),M("deleteRequest",function(c){f(n);let d=s();return u(d.onDeleteCertificate(c))})("editRequest",function(c){f(n);let d=s();return u(d.onEditCertificate(c))})("viewRequest",function(c){f(n);let d=s();return u(d.onViewCertificate(c))}),i()()}if(t&2){let n=s();l(),p("data",n.certificates())}}var Tt=class t{_router=N(K);_certificateSrv=N(Pt);certificates=this._certificateSrv.certificates;loading=this._certificateSrv.loading;error=this._certificateSrv.error;ngOnInit(){this._certificateSrv.list()}reloadCertificates(){this._certificateSrv.list()}onEditCertificate(e){return L(this,null,function*(){this._router.navigate(["/administration/edit",e.id])})}onDeleteCertificate(e){return L(this,null,function*(){try{yield this._certificateSrv.delete(e.id),$.success("Certificado eliminado exitosamente")}catch(n){console.error("Error al eliminar:",n),$.error(n.message||"Error al eliminar el certificado")}})}onViewCertificate(e){}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=P({type:t,selectors:[["app-certificate-list"]],decls:14,vars:3,consts:[[1,"page-container"],[1,"list-container"],[1,"header-actions"],[1,"action-buttons"],["mat-flat-button","","color","primary","routerLink","/administration/new"],[1,"loading-container"],[1,"error-content"],[1,"table-container"],[1,"progress-bar"],[1,"loading-text"],[1,"error-message"],["mat-flat-button","","color","primary",3,"click"],[3,"deleteRequest","editRequest","viewRequest","data"]],template:function(n,r){n&1&&(o(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2"),a(4,"Certificados"),i(),o(5,"div",3)(6,"a",4)(7,"mat-icon"),a(8,"add"),i(),o(9,"span"),a(10,"Nuevo Certificado"),i()()()(),m(11,Wt,4,0,"div",5)(12,Xt,7,1,"div",6)(13,Zt,2,1,"div",7),i()()),n&2&&(l(11),x(r.loading()?11:-1),l(),x(r.error()?12:-1),l(),x(!r.loading()&&!r.error()?13:-1))},dependencies:[O,ct,E,D,q,W,y],styles:['.page-container[_ngcontent-%COMP%]{height:100%;width:100%;display:flex;flex-direction:column}.list-container[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:24px;box-shadow:0 2px 12px #00000014;height:100%;display:flex;flex-direction:column}.header-actions[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:24px}.header-actions[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:22px;font-weight:600;color:#000c;position:relative}.header-actions[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]:after{content:"";position:absolute;bottom:-8px;left:0;width:40px;height:3px;background-color:#3f51b5;border-radius:3px}.action-buttons[_ngcontent-%COMP%]{display:flex;gap:12px}.action-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%], .action-buttons[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{min-width:140px;border-radius:8px;font-weight:500;padding:0 20px;height:40px;line-height:40px;text-transform:uppercase;letter-spacing:.5px;font-size:13px;transition:all .2s ease}.action-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover, .action-buttons[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 8px #0000001a}.loading-container[_ngcontent-%COMP%]{padding:16px 0}.loading-container[_ngcontent-%COMP%]   .progress-bar[_ngcontent-%COMP%]{width:100%;height:4px;background-color:#3f51b51a;border-radius:4px;overflow:hidden;position:relative}.loading-container[_ngcontent-%COMP%]   .progress-bar[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;height:100%;width:30%;background-color:#3f51b5;animation:_ngcontent-%COMP%_loading 1.5s infinite ease-in-out;border-radius:4px}.loading-container[_ngcontent-%COMP%]   .loading-text[_ngcontent-%COMP%]{text-align:center;margin-top:16px;color:#0009;font-size:14px}@keyframes _ngcontent-%COMP%_loading{0%{left:-30%}to{left:100%}}.error-content[_ngcontent-%COMP%]{text-align:center;padding:40px 20px;background-color:#f443360d;border-radius:8px;margin:20px 0}.error-content[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]{color:#f44336;margin-bottom:16px;font-size:16px;font-weight:500}.error-content[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border-radius:8px;padding:0 24px;height:40px;line-height:40px;font-weight:500}.table-container[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;overflow:hidden}@media (max-width: 600px){.list-container[_ngcontent-%COMP%]{padding:16px;border-radius:8px}.header-actions[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:20px;margin-bottom:20px}.action-buttons[_ngcontent-%COMP%]{width:100%;flex-direction:column}.action-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%], .action-buttons[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{width:100%}}']})};export{Tt as CertificateListComponent};
