import{$a as q,Gc as X,W as L,Z as b,aa as C,da as K,eb as J,ma as W,sa as z,wa as Q}from"./chunk-YUNIQHUY.js";import{a as E,b as Z,c as j}from"./chunk-ODN5LVDJ.js";var i=function(l){return l.SEPARATOR="separator",l.PERCENT="percent",l.IP="IP",l.CPF_CNPJ="CPF_CNPJ",l.MONTH="M",l.MONTHS="M0",l.MINUTE="m",l.HOUR="h",l.HOURS="H",l.MINUTES="m0",l.HOURS_HOUR="Hh",l.SECONDS="s0",l.HOURS_MINUTES_SECONDS="Hh:m0:s0",l.EMAIL_MASK="A*@A*.A*",l.HOURS_MINUTES="Hh:m0",l.MINUTES_SECONDS="m0:s0",l.DAYS_MONTHS_YEARS="d0/M0/0000",l.DAYS_MONTHS="d0/M0",l.DAYS="d0",l.DAY="d",l.SECOND="s",l.LETTER_S="S",l.DOT=".",l.COMMA=",",l.CURLY_BRACKETS_LEFT="{",l.CURLY_BRACKETS_RIGHT="}",l.MINUS="-",l.OR="||",l.HASH="#",l.EMPTY_STRING="",l.SYMBOL_STAR="*",l.SYMBOL_QUESTION="?",l.SLASH="/",l.WHITE_SPACE=" ",l.NUMBER_ZERO="0",l.NUMBER_NINE="9",l.BACKSPACE="Backspace",l.DELETE="Delete",l.ARROW_LEFT="ArrowLeft",l.ARROW_UP="ArrowUp",l.DOUBLE_ZERO="00",l}(i||{}),D=new b("ngx-mask config"),ee=new b("new ngx-mask config"),te=new b("initial ngx-mask config"),le={suffix:"",prefix:"",thousandSeparator:" ",decimalMarker:[".",","],clearIfNotMatch:!1,showTemplate:!1,showMaskTyped:!1,placeHolderCharacter:"_",dropSpecialCharacters:!0,hiddenInput:null,shownMaskExpression:"",separatorLimit:"",allowNegativeNumbers:!1,validation:!0,specialCharacters:["-","/","(",")",".",":"," ","+",",","@","[","]",'"',"'"],leadZeroDateTime:!1,apm:!1,leadZero:!1,keepCharacterPositions:!1,triggerOnMaskChange:!1,inputTransformFn:l=>l,outputTransformFn:l=>l,maskFilled:new z,patterns:{0:{pattern:new RegExp("\\d")},9:{pattern:new RegExp("\\d"),optional:!0},X:{pattern:new RegExp("\\d"),symbol:"*"},A:{pattern:new RegExp("[a-zA-Z0-9]")},S:{pattern:new RegExp("[a-zA-Z]")},U:{pattern:new RegExp("[A-Z]")},L:{pattern:new RegExp("[a-z]")},d:{pattern:new RegExp("\\d")},m:{pattern:new RegExp("\\d")},M:{pattern:new RegExp("\\d")},H:{pattern:new RegExp("\\d")},h:{pattern:new RegExp("\\d")},s:{pattern:new RegExp("\\d")}}},Re=[i.HOURS_MINUTES_SECONDS,i.HOURS_MINUTES,i.MINUTES_SECONDS],Ie=[i.PERCENT,i.HOURS_HOUR,i.SECONDS,i.MINUTES,i.SEPARATOR,i.DAYS_MONTHS_YEARS,i.DAYS_MONTHS,i.DAYS,i.MONTHS],ce=(()=>{class l{_config=C(D);dropSpecialCharacters=this._config.dropSpecialCharacters;hiddenInput=this._config.hiddenInput;showTemplate;clearIfNotMatch=this._config.clearIfNotMatch;specialCharacters=this._config.specialCharacters;patterns=this._config.patterns;prefix=this._config.prefix;suffix=this._config.suffix;thousandSeparator=this._config.thousandSeparator;decimalMarker=this._config.decimalMarker;customPattern;showMaskTyped=this._config.showMaskTyped;placeHolderCharacter=this._config.placeHolderCharacter;validation=this._config.validation;separatorLimit=this._config.separatorLimit;allowNegativeNumbers=this._config.allowNegativeNumbers;leadZeroDateTime=this._config.leadZeroDateTime;leadZero=this._config.leadZero;apm=this._config.apm;inputTransformFn=this._config.inputTransformFn;outputTransformFn=this._config.outputTransformFn;keepCharacterPositions=this._config.keepCharacterPositions;_shift=new Set;plusOnePosition=!1;maskExpression="";actualValue="";showKeepCharacterExp="";shownMaskExpression="";deletedSpecialCharacter=!1;ipError;cpfCnpjError;applyMaskWithPattern(t,e){let[n,a]=e;return this.customPattern=a,this.applyMask(t,n)}applyMask(t,e,n=0,a=!1,c=!1,_=()=>{}){if(!e||typeof t!="string")return i.EMPTY_STRING;let r=0,h="",p=!1,m=!1,g=1,M=!1,s=t,u=n;s.slice(0,this.prefix.length)===this.prefix&&(s=s.slice(this.prefix.length,s.length)),this.suffix&&s.length>0&&(s=this.checkAndRemoveSuffix(s)),s==="("&&this.prefix&&(s="");let k=s.toString().split(i.EMPTY_STRING);if(this.allowNegativeNumbers&&s.slice(r,r+1)===i.MINUS&&(h+=s.slice(r,r+1)),e===i.IP){let f=s.split(i.DOT);this.ipError=this._validIP(f),e="099.099.099.099"}let A=[];for(let f=0;f<s.length;f++)s[f]?.match("\\d")&&A.push(s[f]??i.EMPTY_STRING);if(e===i.CPF_CNPJ&&(this.cpfCnpjError=A.length!==11&&A.length!==14,A.length>11?e="00.000.000/0000-00":e="000.000.000-00"),e.startsWith(i.PERCENT)){if(s.match("[a-z]|[A-Z]")||s.match(/[-!$%^&*()_+|~=`{}\[\]:";'<>?,\/.]/)&&!c){s=this._stripToDecimal(s);let v=this.getPrecision(e);s=this.checkInputPrecision(s,v,this.decimalMarker)}let f=typeof this.decimalMarker=="string"?this.decimalMarker:i.DOT;if(s.indexOf(f)>0&&!this.percentage(s.substring(0,s.indexOf(f)))){let v=s.substring(0,s.indexOf(f)-1);this.allowNegativeNumbers&&s.slice(r,r+1)===i.MINUS&&!c&&(v=s.substring(0,s.indexOf(f))),s=`${v}${s.substring(s.indexOf(f),s.length)}`}let o="";this.allowNegativeNumbers&&s.slice(r,r+1)===i.MINUS?o=`${i.MINUS}${s.slice(r+1,r+s.length)}`:o=s,this.percentage(o)?h=this._splitPercentZero(s):h=this._splitPercentZero(s.substring(0,s.length-1))}else if(e.startsWith(i.SEPARATOR)){(s.match("[w\u0430-\u044F\u0410-\u042F]")||s.match("[\u0401\u0451\u0410-\u044F]")||s.match("[a-z]|[A-Z]")||s.match(/[-@#!$%\\^&*()_£¬'+|~=`{}\]:";<>.?/]/)||s.match("[^A-Za-z0-9,]"))&&(s=this._stripToDecimal(s));let f=this.getPrecision(e),o=Array.isArray(this.decimalMarker)?this.thousandSeparator===i.DOT?i.COMMA:i.DOT:this.decimalMarker;if(f===0?s=this.allowNegativeNumbers?s.length>2&&s[0]===i.MINUS&&s[1]===i.NUMBER_ZERO&&s[2]!==this.thousandSeparator&&s[2]!==i.COMMA&&s[2]!==i.DOT?"-"+s.slice(2,s.length):s[0]===i.NUMBER_ZERO&&s.length>1&&s[1]!==this.thousandSeparator&&s[1]!==i.COMMA&&s[1]!==i.DOT?s.slice(1,s.length):s:s.length>1&&s[0]===i.NUMBER_ZERO&&s[1]!==this.thousandSeparator&&s[1]!==i.COMMA&&s[1]!==i.DOT?s.slice(1,s.length):s:(s[0]===o&&s.length>1&&(s=i.NUMBER_ZERO+s.slice(0,s.length+1),this.plusOnePosition=!0),s[0]===i.NUMBER_ZERO&&s[1]!==o&&s[1]!==this.thousandSeparator&&(s=s.length>1?s.slice(0,1)+o+s.slice(1,s.length+1):s,this.plusOnePosition=!0),this.allowNegativeNumbers&&s[0]===i.MINUS&&(s[1]===o||s[1]===i.NUMBER_ZERO)&&(s=s[1]===o&&s.length>2?s.slice(0,1)+i.NUMBER_ZERO+s.slice(1,s.length):s[1]===i.NUMBER_ZERO&&s.length>2&&s[2]!==o?s.slice(0,2)+o+s.slice(2,s.length):s,this.plusOnePosition=!0)),c){let S=s.slice(this._findFirstNonZeroDigitIndex(s),s.length),I=s[u]===i.NUMBER_ZERO||s[u]===o,N=s[0]===i.NUMBER_ZERO,O=s[0]===i.MINUS,w=s[0]===this.thousandSeparator,P=s[1]===o,V=s[1]===i.NUMBER_ZERO,U=s[2]===o;N&&P&&I&&u<2&&(s=S),O&&V&&U&&I&&u<3&&(s=i.MINUS+S),S!==i.MINUS&&(u===0&&(N||w)||this.allowNegativeNumbers&&u===1&&O&&!V)&&(s=O?i.MINUS+S:S)}let v=this._charToRegExpExpression(this.thousandSeparator),d='@#!$%^&*()_+|~=`{}\\[\\]:\\s,\\.";<>?\\/'.replace(v,"");if(Array.isArray(this.decimalMarker))for(let S of this.decimalMarker)d=d.replace(this._charToRegExpExpression(S),i.EMPTY_STRING);else d=d.replace(this._charToRegExpExpression(this.decimalMarker),"");let y=new RegExp("["+d+"]");s.match(y)&&(s=s.substring(0,s.length-1)),s=this.checkInputPrecision(s,f,this.decimalMarker);let R=s.replace(new RegExp(v,"g"),"");h=this._formatWithSeparators(R,this.thousandSeparator,this.decimalMarker,f);let Y=h.indexOf(i.COMMA)-s.indexOf(i.COMMA),T=h.length-s.length,x=c&&h.length<t.length&&this.separatorLimit;if((h[u-1]===this.thousandSeparator||h[u-this.prefix.length])&&this.prefix&&c)u=u-1;else if(T>0&&h[u]!==this.thousandSeparator||x){m=!0;let S=0;do this._shift.add(u+S),S++;while(S<T)}else h[u-1]===this.thousandSeparator||T===-4||T===-3||h[u]===this.thousandSeparator?(this._shift.clear(),this._shift.add(u-1)):Y!==0&&u>0&&!(h.indexOf(i.COMMA)>=u&&u>3)||!(h.indexOf(i.DOT)>=u&&u>3)&&T<=0?(this._shift.clear(),m=!0,g=T,u+=T,this._shift.add(u)):this._shift.clear()}else for(let f=0,o=k[0];f<k.length&&r!==e.length;f++,o=k[f]??i.EMPTY_STRING){let v=i.SYMBOL_STAR in this.patterns;if(this._checkSymbolMask(o,e[r]??i.EMPTY_STRING)&&e[r+1]===i.SYMBOL_QUESTION)h+=o,r+=2;else if(e[r+1]===i.SYMBOL_STAR&&p&&this._checkSymbolMask(o,e[r+2]??i.EMPTY_STRING))h+=o,r+=3,p=!1;else if(this._checkSymbolMask(o,e[r]??i.EMPTY_STRING)&&e[r+1]===i.SYMBOL_STAR&&!v)h+=o,p=!0;else if(e[r+1]===i.SYMBOL_QUESTION&&this._checkSymbolMask(o,e[r+2]??i.EMPTY_STRING))h+=o,r+=3;else if(this._checkSymbolMask(o,e[r]??i.EMPTY_STRING)){if(e[r]===i.HOURS&&(this.apm?Number(o)>9:Number(o)>2)){u=this.leadZeroDateTime?u:u+1,r+=1,this._shiftStep(e,r,k.length),f--,this.leadZeroDateTime&&(h+="0");continue}if(e[r]===i.HOUR&&(this.apm?h.length===1&&Number(h)>1||h==="1"&&Number(o)>2||s.slice(r-1,r).length===1&&Number(s.slice(r-1,r))>2||s.slice(r-1,r)==="1"&&Number(o)>2:h==="2"&&Number(o)>3||(h.slice(r-2,r)==="2"||h.slice(r-3,r)==="2"||h.slice(r-4,r)==="2"||h.slice(r-1,r)==="2")&&Number(o)>3&&r>10)){u=u+1,r+=1,f--;continue}if((e[r]===i.MINUTE||e[r]===i.SECOND)&&Number(o)>5){u=this.leadZeroDateTime?u:u+1,r+=1,this._shiftStep(e,r,k.length),f--,this.leadZeroDateTime&&(h+="0");continue}let d=31,y=s[r],R=s[r+1],Y=s[r+2],T=s[r-1],x=s[r-2],S=s.slice(r-3,r-1),I=s.slice(r-1,r+1),N=s.slice(r,r+2),O=s.slice(r-2,r);if(e[r]===i.DAY){let w=e.slice(0,2)===i.MONTHS,P=e.slice(0,2)===i.MONTHS&&this.specialCharacters.includes(x);if(Number(o)>3&&this.leadZeroDateTime||!w&&(Number(N)>d||Number(I)>d||this.specialCharacters.includes(R))||(P?Number(I)>d||!this.specialCharacters.includes(y)&&this.specialCharacters.includes(Y)||this.specialCharacters.includes(y):Number(N)>d||this.specialCharacters.includes(R)&&!c)){u=this.leadZeroDateTime?u:u+1,r+=1,this._shiftStep(e,r,k.length),f--,this.leadZeroDateTime&&(h+="0");continue}}if(e[r]===i.MONTH){let P=r===0&&(Number(o)>2||Number(N)>12||this.specialCharacters.includes(R)&&!c),V=e.slice(r+2,r+3),U=S.includes(V)&&e.includes("d0")&&(this.specialCharacters.includes(x)&&Number(I)>12&&!this.specialCharacters.includes(y)||this.specialCharacters.includes(y)),re=Number(S)<=d&&!this.specialCharacters.includes(S)&&this.specialCharacters.includes(T)&&(Number(N)>12||this.specialCharacters.includes(R)),ae=Number(N)>12&&r===5||this.specialCharacters.includes(R)&&r===5,ne=Number(S)>d&&!this.specialCharacters.includes(S)&&!this.specialCharacters.includes(O)&&Number(O)>12&&e.includes("d0"),he=Number(S)<=d&&!this.specialCharacters.includes(S)&&!this.specialCharacters.includes(T)&&Number(I)>12;if(Number(o)>1&&this.leadZeroDateTime||P||U||he||ne||re||ae&&!this.leadZeroDateTime){u=this.leadZeroDateTime?u:u+1,r+=1,this._shiftStep(e,r,k.length),f--,this.leadZeroDateTime&&(h+="0");continue}}h+=o,r++}else this.specialCharacters.includes(o)&&e[r]===o?(h+=o,r++):this.specialCharacters.indexOf(e[r]??i.EMPTY_STRING)!==-1?(h+=e[r],r++,this._shiftStep(e,r,k.length),f--):e[r]===i.NUMBER_NINE&&this.showMaskTyped?this._shiftStep(e,r,k.length):this.patterns[e[r]??i.EMPTY_STRING]&&this.patterns[e[r]??i.EMPTY_STRING]?.optional?(k[r]&&e!=="099.099.099.099"&&e!=="000.000.000-00"&&e!=="00.000.000/0000-00"&&!e.match(/^9+\.0+$/)&&!this.patterns[e[r]??i.EMPTY_STRING]?.optional&&(h+=k[r]),e.includes(i.NUMBER_NINE+i.SYMBOL_STAR)&&e.includes(i.NUMBER_ZERO+i.SYMBOL_STAR)&&r++,r++,f--):this.maskExpression[r+1]===i.SYMBOL_STAR&&this._findSpecialChar(this.maskExpression[r+2]??i.EMPTY_STRING)&&this._findSpecialChar(o)===this.maskExpression[r+2]&&p||this.maskExpression[r+1]===i.SYMBOL_QUESTION&&this._findSpecialChar(this.maskExpression[r+2]??i.EMPTY_STRING)&&this._findSpecialChar(o)===this.maskExpression[r+2]&&p?(r+=3,h+=o):this.showMaskTyped&&this.specialCharacters.indexOf(o)<0&&o!==this.placeHolderCharacter&&this.placeHolderCharacter.length===1&&(M=!0)}h.length+1===e.length&&this.specialCharacters.indexOf(e[e.length-1]??i.EMPTY_STRING)!==-1&&(h+=e[e.length-1]);let F=u+1;for(;this._shift.has(F);)g++,F++;let G=a&&!e.startsWith(i.SEPARATOR)?r:this._shift.has(u)?g:0;M&&G--,_(G,m),g<0&&this._shift.clear();let B=!1;c&&(B=k.every(f=>this.specialCharacters.includes(f)));let H=`${this.prefix}${B?i.EMPTY_STRING:h}${this.showMaskTyped?"":this.suffix}`;h.length===0&&(H=this.dropSpecialCharacters?`${h}`:`${this.prefix}${h}`);let se=s.length===1&&this.specialCharacters.includes(e[0])&&s!==e[0];if(!this._checkSymbolMask(s,e[1])&&se)return"";if(h.includes(i.MINUS)&&this.prefix&&this.allowNegativeNumbers){if(c&&h===i.MINUS)return"";H=`${i.MINUS}${this.prefix}${h.split(i.MINUS).join(i.EMPTY_STRING)}${this.suffix}`}return H}_findDropSpecialChar(t){return Array.isArray(this.dropSpecialCharacters)?this.dropSpecialCharacters.find(e=>e===t):this._findSpecialChar(t)}_findSpecialChar(t){return this.specialCharacters.find(e=>e===t)}_checkSymbolMask(t,e){return this.patterns=this.customPattern?this.customPattern:this.patterns,(this.patterns[e]?.pattern&&this.patterns[e]?.pattern.test(t))??!1}_formatWithSeparators=(t,e,n,a)=>{let c=[],_="";if(Array.isArray(n)){let g=new RegExp(n.map(M=>"[\\^$.|?*+()".indexOf(M)>=0?`\\${M}`:M).join("|"));c=t.split(g),_=t.match(g)?.[0]??i.EMPTY_STRING}else c=t.split(n),_=n;let r=c.length>1?`${_}${c[1]}`:i.EMPTY_STRING,h=c[0]??i.EMPTY_STRING,p=this.separatorLimit.replace(/\s/g,i.EMPTY_STRING);p&&+p&&(h[0]===i.MINUS?h=`-${h.slice(1,h.length).slice(0,p.length)}`:h=h.slice(0,p.length));let m=/(\d+)(\d{3})/;for(;e&&m.test(h);)h=h.replace(m,"$1"+e+"$2");return typeof a>"u"?h+r:a===0?h:h+r.substring(0,a+1)};percentage=t=>{let e=t.replace(",","."),n=Number(this.allowNegativeNumbers&&t.includes(i.MINUS)?e.slice(1,t.length):e);return!isNaN(n)&&n>=0&&n<=100};getPrecision=t=>{let e=t.split(i.DOT);return e.length>1?Number(e[e.length-1]):1/0};checkAndRemoveSuffix=t=>{for(let e=this.suffix?.length-1;e>=0;e--){let n=this.suffix.substring(e,this.suffix?.length);if(t.includes(n)&&e!==this.suffix?.length-1&&(e-1<0||!t.includes(this.suffix.substring(e-1,this.suffix?.length))))return t.replace(n,i.EMPTY_STRING)}return t};checkInputPrecision=(t,e,n)=>{let a=t,c=n;if(e<1/0){if(Array.isArray(c)){let p=c.find(m=>m!==this.thousandSeparator);c=p||c[0]}let _=new RegExp(this._charToRegExpExpression(c)+`\\d{${e}}.*$`),r=a.match(_),h=(r&&r[0]?.length)??0;if(h-1>e){let p=h-1-e;a=a.substring(0,a.length-p)}e===0&&this._compareOrIncludes(a[a.length-1],c,this.thousandSeparator)&&(a=a.substring(0,a.length-1))}return a};_stripToDecimal(t){return t.split(i.EMPTY_STRING).filter((e,n)=>{let a=typeof this.decimalMarker=="string"?e===this.decimalMarker:this.decimalMarker.includes(e);return e.match("^-?\\d")||e===this.thousandSeparator||a||e===i.MINUS&&n===0&&this.allowNegativeNumbers}).join(i.EMPTY_STRING)}_charToRegExpExpression(t){return t&&(t===" "?"\\s":"[\\^$.|?*+()".indexOf(t)>=0?`\\${t}`:t)}_shiftStep(t,e,n){let a=/[*?]/g.test(t.slice(0,e))?n:e;this._shift.add(a+this.prefix.length||0)}_compareOrIncludes(t,e,n){return Array.isArray(e)?e.filter(a=>a!==n).includes(t):t===e}_validIP(t){return!(t.length===4&&!t.some((e,n)=>t.length!==n+1?e===i.EMPTY_STRING||Number(e)>255:e===i.EMPTY_STRING||Number(e.substring(0,3))>255))}_splitPercentZero(t){if(t===i.MINUS&&this.allowNegativeNumbers)return t;let e=typeof this.decimalMarker=="string"?t.indexOf(this.decimalMarker):t.indexOf(i.DOT),n=this.allowNegativeNumbers&&t.includes(i.MINUS)?"-":"";if(e===-1){let a=parseInt(n?t.slice(1,t.length):t,10);return isNaN(a)?i.EMPTY_STRING:`${n}${a}`}else{let a=parseInt(t.replace("-","").substring(0,e),10),c=t.substring(e+1),_=isNaN(a)?"":a.toString(),r=typeof this.decimalMarker=="string"?this.decimalMarker:i.DOT;return _===i.EMPTY_STRING?i.EMPTY_STRING:`${n}${_}${r}${c}`}}_findFirstNonZeroDigitIndex(t){for(let e=0;e<t.length;e++){let n=t[e];if(n&&n>="1"&&n<="9")return e}return-1}static \u0275fac=function(e){return new(e||l)};static \u0275prov=L({token:l,factory:l.\u0275fac})}return l})(),ie=(()=>{class l extends ce{isNumberValue=!1;maskIsShown="";selStart=null;selEnd=null;writingValue=!1;maskChanged=!1;_maskExpressionArray=[];triggerOnMaskChange=!1;_previousValue="";_currentValue="";_emitValue=!1;_start;_end;onChange=t=>{};_elementRef=C(Q,{optional:!0});document=C(X);_config=C(D);_renderer=C(q,{optional:!0});applyMask(t,e,n=0,a=!1,c=!1,_=()=>{}){if(!e)return t!==this.actualValue?this.actualValue:t;if(this.maskIsShown=this.showMaskTyped?this.showMaskInInput():i.EMPTY_STRING,this.maskExpression===i.IP&&this.showMaskTyped&&(this.maskIsShown=this.showMaskInInput(t||i.HASH)),this.maskExpression===i.CPF_CNPJ&&this.showMaskTyped&&(this.maskIsShown=this.showMaskInInput(t||i.HASH)),!t&&this.showMaskTyped)return this.formControlResult(this.prefix),`${this.prefix}${this.maskIsShown}${this.suffix}`;let r=t&&typeof this.selStart=="number"?t[this.selStart]??i.EMPTY_STRING:i.EMPTY_STRING,h="",p=n;if(this.hiddenInput!==null&&!this.writingValue){let s=t&&t.length===1?t.split(i.EMPTY_STRING):this.actualValue.split(i.EMPTY_STRING);typeof this.selStart=="object"&&typeof this.selEnd=="object"?(this.selStart=Number(this.selStart),this.selEnd=Number(this.selEnd)):t!==i.EMPTY_STRING&&s.length?typeof this.selStart=="number"&&typeof this.selEnd=="number"&&(t.length>s.length?s.splice(this.selStart,0,r):t.length<s.length&&(s.length-t.length===1?c?s.splice(this.selStart-1,1):s.splice(t.length-1,1):s.splice(this.selStart,this.selEnd-this.selStart))):s=[],this.showMaskTyped&&!this.hiddenInput&&(h=this.removeMask(t)),h=this.actualValue.length&&s.length<=t.length?this.shiftTypedSymbols(s.join(i.EMPTY_STRING)):t}if(a&&(this.hiddenInput||!this.hiddenInput)&&(h=t),c&&this.specialCharacters.indexOf(this.maskExpression[p]??i.EMPTY_STRING)!==-1&&this.showMaskTyped&&!this.prefix&&(h=this._currentValue),this.deletedSpecialCharacter&&p&&(this.specialCharacters.includes(this.actualValue.slice(p,p+1))?p=p+1:e.slice(p-1,p+1)!==i.MONTHS&&(p=p-2),this.deletedSpecialCharacter=!1),this.showMaskTyped&&this.placeHolderCharacter.length===1&&!this.leadZeroDateTime&&(h=this.removeMask(t)),this.maskChanged?h=t:h=h&&h.length?h:t,this.showMaskTyped&&this.keepCharacterPositions&&this.actualValue&&!a&&!this.writingValue){let s=this.dropSpecialCharacters?this.removeMask(this.actualValue):this.actualValue;return this.formControlResult(s),this.actualValue?this.actualValue:`${this.prefix}${this.maskIsShown}${this.suffix}`}let m=super.applyMask(h,e,p,a,c,_);if(this.actualValue=this.getActualValue(m),this.thousandSeparator===i.DOT&&this.decimalMarker===i.DOT&&(this.decimalMarker=i.COMMA),this.maskExpression.startsWith(i.SEPARATOR)&&this.dropSpecialCharacters===!0&&(this.specialCharacters=this.specialCharacters.filter(s=>!this._compareOrIncludes(s,this.decimalMarker,this.thousandSeparator))),(m||m==="")&&(this._previousValue=this._currentValue,this._currentValue=m,this._emitValue=this._previousValue!==this._currentValue||this.maskChanged||this.writingValue||this._previousValue===this._currentValue&&a),this._emitValue&&(this.writingValue&&this.triggerOnMaskChange?requestAnimationFrame(()=>this.formControlResult(m)):this.formControlResult(m)),!this.showMaskTyped||this.showMaskTyped&&this.hiddenInput)return this.hiddenInput?c?this.hideInput(m,this.maskExpression):`${this.hideInput(m,this.maskExpression)}${this.maskIsShown.slice(m.length)}`:m;let g=m.length,M=`${this.prefix}${this.maskIsShown}${this.suffix}`;if(this.maskExpression.includes(i.HOURS)){let s=this._numberSkipedSymbols(m);return`${m}${M.slice(g+s)}`}else if(this.maskExpression===i.IP||this.maskExpression===i.CPF_CNPJ)return`${m}${M}`;return`${m}${M.slice(g)}`}_numberSkipedSymbols(t){let e=/(^|\D)(\d\D)/g,n=e.exec(t),a=0;for(;n!=null;)a+=1,n=e.exec(t);return a}applyValueChanges(t,e,n,a=()=>{}){let c=this._elementRef?.nativeElement;c&&(c.value=this.applyMask(c.value,this.maskExpression,t,e,n,a),c!==this._getActiveElement()&&this.clearIfNotMatchFn())}hideInput(t,e){return t.split(i.EMPTY_STRING).map((n,a)=>this.patterns&&this.patterns[e[a]??i.EMPTY_STRING]&&this.patterns[e[a]??i.EMPTY_STRING]?.symbol?this.patterns[e[a]??i.EMPTY_STRING]?.symbol:n).join(i.EMPTY_STRING)}getActualValue(t){let e=t.split(i.EMPTY_STRING).filter((n,a)=>{let c=this.maskExpression[a]??i.EMPTY_STRING;return this._checkSymbolMask(n,c)||this.specialCharacters.includes(c)&&n===c});return e.join(i.EMPTY_STRING)===t?e.join(i.EMPTY_STRING):t}shiftTypedSymbols(t){let e="";return(t&&t.split(i.EMPTY_STRING).map((a,c)=>{if(this.specialCharacters.includes(t[c+1]??i.EMPTY_STRING)&&t[c+1]!==this.maskExpression[c+1])return e=a,t[c+1];if(e.length){let _=e;return e=i.EMPTY_STRING,_}return a})||[]).join(i.EMPTY_STRING)}numberToString(t){return!t&&t!==0||this.maskExpression.startsWith(i.SEPARATOR)&&(this.leadZero||!this.dropSpecialCharacters)||this.maskExpression.startsWith(i.SEPARATOR)&&this.separatorLimit.length>14&&String(t).length>14?String(t):Number(t).toLocaleString("fullwide",{useGrouping:!1,maximumFractionDigits:20}).replace(`/${i.MINUS}/`,i.MINUS)}showMaskInInput(t){if(this.showMaskTyped&&this.shownMaskExpression){if(this.maskExpression.length!==this.shownMaskExpression.length)throw new Error("Mask expression must match mask placeholder length");return this.shownMaskExpression}else if(this.showMaskTyped){if(t){if(this.maskExpression===i.IP)return this._checkForIp(t);if(this.maskExpression===i.CPF_CNPJ)return this._checkForCpfCnpj(t)}return this.placeHolderCharacter.length===this.maskExpression.length?this.placeHolderCharacter:this.maskExpression.replace(/\w/g,this.placeHolderCharacter)}return""}clearIfNotMatchFn(){let t=this._elementRef?.nativeElement;t&&this.clearIfNotMatch&&this.prefix.length+this.maskExpression.length+this.suffix.length!==t.value.replace(this.placeHolderCharacter,i.EMPTY_STRING).length&&(this.formElementProperty=["value",i.EMPTY_STRING],this.applyMask("",this.maskExpression))}set formElementProperty([t,e]){!this._renderer||!this._elementRef||Promise.resolve().then(()=>this._renderer?.setProperty(this._elementRef?.nativeElement,t,e))}checkDropSpecialCharAmount(t){return t.split(i.EMPTY_STRING).filter(n=>this._findDropSpecialChar(n)).length}removeMask(t){return this._removeMask(this._removeSuffix(this._removePrefix(t)),this.specialCharacters.concat("_").concat(this.placeHolderCharacter))}_checkForIp(t){if(t===i.HASH)return`${this.placeHolderCharacter}.${this.placeHolderCharacter}.${this.placeHolderCharacter}.${this.placeHolderCharacter}`;let e=[];for(let n=0;n<t.length;n++){let a=t[n]??i.EMPTY_STRING;a&&a.match("\\d")&&e.push(a)}return e.length<=3?`${this.placeHolderCharacter}.${this.placeHolderCharacter}.${this.placeHolderCharacter}`:e.length>3&&e.length<=6?`${this.placeHolderCharacter}.${this.placeHolderCharacter}`:e.length>6&&e.length<=9?this.placeHolderCharacter:(e.length>9&&e.length<=12,"")}_checkForCpfCnpj(t){let e=`${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}.${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}.${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}-${this.placeHolderCharacter}${this.placeHolderCharacter}`,n=`${this.placeHolderCharacter}${this.placeHolderCharacter}.${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}.${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}/${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}-${this.placeHolderCharacter}${this.placeHolderCharacter}`;if(t===i.HASH)return e;let a=[];for(let c=0;c<t.length;c++){let _=t[c]??i.EMPTY_STRING;_&&_.match("\\d")&&a.push(_)}return a.length<=3?e.slice(a.length,e.length):a.length>3&&a.length<=6?e.slice(a.length+1,e.length):a.length>6&&a.length<=9?e.slice(a.length+2,e.length):a.length>9&&a.length<11?e.slice(a.length+3,e.length):a.length===11?"":a.length===12?t.length===17?n.slice(16,n.length):n.slice(15,n.length):a.length>12&&a.length<=14?n.slice(a.length+4,n.length):""}_getActiveElement(t=this.document){let e=t?.activeElement?.shadowRoot;return e?.activeElement?this._getActiveElement(e):t.activeElement}formControlResult(t){if(this.writingValue&&!t){this.onChange("");return}if(this.writingValue||!this.triggerOnMaskChange&&this.maskChanged){this.triggerOnMaskChange&&this.maskChanged&&this.onChange(this.outputTransformFn(this._toNumber(this._checkSymbols(this._removeSuffix(this._removePrefix(t)))))),this.maskChanged=!1;return}Array.isArray(this.dropSpecialCharacters)?this.onChange(this.outputTransformFn(this._toNumber(this._checkSymbols(this._removeMask(this._removeSuffix(this._removePrefix(t)),this.dropSpecialCharacters))))):this.dropSpecialCharacters||!this.dropSpecialCharacters&&this.prefix===t?this.onChange(this.outputTransformFn(this._toNumber(this._checkSymbols(this._removeSuffix(this._removePrefix(t)))))):this.onChange(this.outputTransformFn(this._toNumber(t)))}_toNumber(t){if(!this.isNumberValue||t===i.EMPTY_STRING||this.maskExpression.startsWith(i.SEPARATOR)&&(this.leadZero||!this.dropSpecialCharacters))return t;if(String(t).length>14&&this.maskExpression.startsWith(i.SEPARATOR))return String(t);let e=Number(t);if(this.maskExpression.startsWith(i.SEPARATOR)&&Number.isNaN(e)){let n=String(t).replace(",",".");return Number(n)}return Number.isNaN(e)?t:e}_removeMask(t,e){return this.maskExpression.startsWith(i.PERCENT)&&t.includes(i.DOT)?t:t&&t.replace(this._regExpForRemove(e),i.EMPTY_STRING)}_removePrefix(t){return this.prefix?t&&t.replace(this.prefix,i.EMPTY_STRING):t}_removeSuffix(t){return this.suffix?t&&t.replace(this.suffix,i.EMPTY_STRING):t}_retrieveSeparatorValue(t){let e=Array.isArray(this.dropSpecialCharacters)?this.specialCharacters.filter(n=>this.dropSpecialCharacters.includes(n)):this.specialCharacters;return!this.deletedSpecialCharacter&&this._checkPatternForSpace()&&t.includes(i.WHITE_SPACE)&&this.maskExpression.includes(i.SYMBOL_STAR)&&(e=e.filter(n=>n!==i.WHITE_SPACE)),this._removeMask(t,e)}_regExpForRemove(t){return new RegExp(t.map(e=>`\\${e}`).join("|"),"gi")}_replaceDecimalMarkerToDot(t){let e=Array.isArray(this.decimalMarker)?this.decimalMarker:[this.decimalMarker];return t.replace(this._regExpForRemove(e),i.DOT)}_checkSymbols(t){let e=t;if(e===i.EMPTY_STRING)return e;this.maskExpression.startsWith(i.PERCENT)&&this.decimalMarker===i.COMMA&&(e=e.replace(i.COMMA,i.DOT));let n=this._retrieveSeparatorPrecision(this.maskExpression),a=this._replaceDecimalMarkerToDot(this._retrieveSeparatorValue(e));return this.isNumberValue&&n?e===this.decimalMarker?null:a.length>14?String(a):this._checkPrecision(this.maskExpression,a):a}_checkPatternForSpace(){for(let t in this.patterns)if(this.patterns[t]&&this.patterns[t]?.hasOwnProperty("pattern")){let e=this.patterns[t]?.pattern.toString(),n=this.patterns[t]?.pattern;if(e?.includes(i.WHITE_SPACE)&&n?.test(this.maskExpression))return!0}return!1}_retrieveSeparatorPrecision(t){let e=t.match(new RegExp("^separator\\.([^d]*)"));return e?Number(e[1]):null}_checkPrecision(t,e){let n=this.getPrecision(t),a=e;return t.indexOf("2")>0||this.leadZero&&Number(n)>0?(this.decimalMarker===i.COMMA&&this.leadZero&&(a=a.replace(",",".")),this.leadZero?Number(a).toFixed(Number(n)):Number(a).toFixed(2)):this.numberToString(a)}_repeatPatternSymbols(t){return t.match(/{[0-9]+}/)&&t.split(i.EMPTY_STRING).reduce((e,n,a)=>{if(this._start=n===i.CURLY_BRACKETS_LEFT?a:this._start,n!==i.CURLY_BRACKETS_RIGHT)return this._findSpecialChar(n)?e+n:e;this._end=a;let c=Number(t.slice(this._start+1,this._end)),_=new Array(c+1).join(t[this._start-1]);if(t.slice(0,this._start).length>1&&t.includes(i.LETTER_S)){let r=t.slice(0,this._start-1);return r.includes(i.CURLY_BRACKETS_LEFT)?e+_:r+e+_}else return e+_},"")||t}currentLocaleDecimalMarker(){return 1.1.toLocaleString().substring(1,2)}static \u0275fac=(()=>{let t;return function(n){return(t||(t=W(l)))(n||l)}})();static \u0275prov=L({token:l,factory:l.\u0275fac})}return l})();function oe(){let l=C(te),$=C(ee);return $ instanceof Function?E(E({},l),$()):E(E({},l),$)}function ue(l){return[{provide:ee,useValue:l},{provide:te,useValue:le},{provide:D,useFactory:oe},ie]}function ye(l){return K(ue(l))}var Oe=(()=>{class l{defaultOptions=C(D);_maskService=C(ie);_maskExpressionArray=[];mask="";transform(t,e,c={}){var _=c,{patterns:n}=_,a=j(_,["patterns"]);let r=t,h=Z(E(E({maskExpression:e},this.defaultOptions),a),{patterns:E(E({},this._maskService.patterns),n)});if(Object.entries(h).forEach(([p,m])=>{this._maskService[p]=m}),e.includes("||")){let p=e.split("||");return p.length>1?(this._maskExpressionArray=p.sort((m,g)=>m.length-g.length),this._setMask(r),this._maskService.applyMask(`${r}`,this.mask)):(this._maskExpressionArray=[],this._maskService.applyMask(`${r}`,this.mask))}if(e.includes(i.CURLY_BRACKETS_LEFT))return this._maskService.applyMask(`${r}`,this._maskService._repeatPatternSymbols(e));if(e.startsWith(i.SEPARATOR)){a.decimalMarker&&(this._maskService.decimalMarker=a.decimalMarker),a.thousandSeparator&&(this._maskService.thousandSeparator=a.thousandSeparator),a.leadZero&&(this._maskService.leadZero=a.leadZero),r=String(r);let p=this._maskService.currentLocaleDecimalMarker();Array.isArray(this._maskService.decimalMarker)||(r=this._maskService.decimalMarker!==p?r.replace(p,this._maskService.decimalMarker):r),this._maskService.leadZero&&r&&this._maskService.dropSpecialCharacters!==!1&&(r=this._maskService._checkPrecision(e,r)),this._maskService.decimalMarker===i.COMMA&&(r=r.replace(i.DOT,i.COMMA)),this._maskService.isNumberValue=!0}return r===null||typeof r>"u"?this._maskService.applyMask("",e):this._maskService.applyMask(`${r}`,e)}_setMask(t){this._maskExpressionArray.length>0&&this._maskExpressionArray.some(e=>{let n=this._maskService.removeMask(t)?.length<=this._maskService.removeMask(e)?.length;if(t&&n)return this.mask=e,n;{let a=this._maskExpressionArray[this._maskExpressionArray.length-1]??i.EMPTY_STRING;this.mask=a}})}static \u0275fac=function(e){return new(e||l)};static \u0275pipe=J({name:"mask",type:l,pure:!0})}return l})();export{ye as a,Oe as b};
